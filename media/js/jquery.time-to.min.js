/**
 * Time-To jQuery plug-in
 * Show countdown timer or realtime clock
 *
 * @author Oleksii Teterin <altmoc@gmail.com>
 * @update Pascal 
 * @version 1.2.3 PL
 * @license MIT http://opensource.org/licenses/MIT
 *
 * Pascal : added Pause/restart & up/down timer
 *
 * @date 2018-12-15
 */
!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):"object"==typeof exports?module.exports=t(require("jquery")):t(jQuery)}(function(e){var s,a=86400,n=3600,o={callback:null,step:null,stepCount:1,captionSize:0,countdown:!0,countdownAlertLimit:10,displayCaptions:!1,displayDays:0,displayHours:!0,fontFamily:"Verdana, sans-serif",fontSize:0,lang:"en",languages:{},seconds:0,start:!0,theme:"white",width:25,height:30,gap:11,vals:[0,0,0,0,0,0,0,0,0],limits:[9,9,9,2,9,5,9,5,9],iSec:8,iHour:4,tickTimeout:1e3,intervalId:null,tickCount:0},l={start:function(t,i){var s;(t||0==t&&!this.data("countdown"))&&(this.data("countdown")||i?r.call(this,t):r.call(this,0),s=setTimeout(c.bind(this),1e3),this.data("ttStartTime",e.now()),this.data("intervalId",s))},stop:function(){var t=this.data();return t.intervalId&&(clearTimeout(t.intervalId),this.data("intervalId",null)),this.find("div").css({backgroundPosition:"left center"}),this.find("ul").parent().removeClass("timeTo-alert"),t},reset:function(t){var i=l.stop.call(this),e=void 0===t?i.seconds:t;this.find("div").css({backgroundPosition:"left center"}),this.find("ul").parent().removeClass("timeTo-alert"),r.call(this,e,!0)},pause:function(){return l.stop.call(this)},resume:function(){var e=this.data();for(t=0,i=0;i<e.vals.length-1;i+=2)t=60*t+10*e.vals[i]+1*e.vals[i+1];e.seconds=t,e.sec=t,l.start.call(this,t,!0)}},d={en:{days:"days",hours:"hours",min:"minutes",sec:"seconds",abbr_day:"d"},ru:{days:"дней",hours:"часов",min:"минут",sec:"секунд",abbr_day:"д"},ua:{days:"днiв",hours:"годин",min:"хвилин",sec:"секунд",abbr_day:"д"},de:{days:"Tag",hours:"Uhr",min:"Minuten",sec:"Secunden",abbr_day:"T"},fr:{days:"jours",hours:"heures",min:"minutes",sec:"secondes",abbr_day:"j"},sp:{days:"días",hours:"horas",min:"minutos",sec:"segundos",abbr_day:"d"},it:{days:"giorni",hours:"ore",min:"minuti",sec:"secondi",abbr_day:"g"},nl:{days:"dagen",hours:"uren",min:"minuten",sec:"seconden",abbr_day:"d"},no:{days:"dager",hours:"timer",min:"minutter",sec:"sekunder",abbr_day:"d"},pt:{days:"dias",hours:"horas",min:"minutos",sec:"segundos",abbr_day:"d"},tr:{days:"gün",hours:"saat",min:"dakika",sec:"saniye",abbr_day:"g"},pl:{days:"dni",hours:"godziny",min:"minuty",sec:"secundy",abbr_day:"d"}};function r(t,i){var s,o,l,d,r,u,h,p,f,y=this.data(),m=this.find("ul"),g=!1;if(y.vals&&0!==m.length){for(!t&&y.countdown&&(t=y.seconds),y.intervalId&&(g=!0,clearTimeout(y.intervalId)),o=(s=Math.floor(t/a))*a,o+=(l=Math.floor((t-o)/n))*n,r=t-(o+=60*(d=Math.floor((t-o)/60))),u=(s<100?"0"+(s<10?"0":""):"")+s+(l<10?"0":"")+l+(d<10?"0":"")+d+(r<10?"0":"")+r,h=y.vals.length-1,p=u.length-1;h>=0;h-=1,p-=1)f=parseInt(u.substr(p,1),10),y.vals[h]=f,m.eq(h).children().html(f);(g||i)&&(y.ttStartTime=e.now(),y.intervalId=setTimeout(c.bind(this),1e3),this.data("intervalId",y.intervalId))}}function c(s){var a,n,o,l,d,r,u=this,h=this.find("ul"),p=this.data();if(!p.vals||0===h.length)return p.intervalId&&(clearTimeout(p.intervalId),this.data("intervalId",null)),void(p.callback&&p.callback());void 0===s&&(s=p.iSec),this.data("tickCount",p.tickCount+1),a=p.vals[s],n=h.eq(s),o=n.children(),l=p.countdown?-1:1,o.eq(1).html(a),a+=l,"function"==typeof p.step&&p.tickCount%p.stepCount==0&&(this.data("tickCount",0),p.step()),s===p.iSec&&(d=p.tickTimeout,r=e.now()-p.ttStartTime,p.sec+=l,d+=Math.abs(p.seconds-p.sec)*d-r,p.intervalId=setTimeout(c.bind(this),d)),a<0||a>p.limits[s]?(a<0?(a=p.limits[s],s===p.iHour&&p.displayDays>0&&0===p.vals[s-1]&&(a=3)):a=0,s>0&&c.call(this,s-1)):!p.countdown&&s===p.iHour&&p.displayDays>0&&2===p.vals[s-1]&&3===p.vals[s]&&(a=0,c.call(this,s-1)),o.eq(0).html(a),e.support.transition?(n.addClass("transition"),n.css({top:0}),setTimeout(function(){if(n.removeClass("transition"),o.eq(1).html(a),n.css({top:"-"+p.height+"px"}),s===p.iSec){if(t=0,l>0)for(i=0;i<p.vals.length-1;i+=2)t=60*t+10*p.vals[i]+1*p.vals[i+1];(l<0&&p.sec===p.countdownAlertLimit||l>0&&t==p.options.seconds-p.countdownAlertLimit)&&h.parent().addClass("timeTo-alert"),(l<0&&0===p.sec||l>0&&t===p.options.seconds)&&(h.parent().removeClass("timeTo-alert"),p.intervalId&&(clearTimeout(p.intervalId),u.data("intervalId",null)),"function"==typeof p.callback&&p.callback())}},410)):n.stop().animate({top:0},400,s!==p.iSec?null:function(){o.eq(1).html(a),n.css({top:"-"+p.height+"px"}),l>0||s!==p.iSec||(p.sec===p.countdownAlertLimit?h.parent().addClass("timeTo-alert"):0===p.sec&&(h.parent().removeClass("timeTo-alert"),p.intervalId&&(clearTimeout(p.intervalId),u.data("intervalId",null)),"function"==typeof p.callback&&p.callback()))}),p.vals[s]=a}return void 0===e.support.transition&&(e.support.transition=void 0!==(s=(document.body||document.documentElement).style).transition||void 0!==s.WebkitTransition||void 0!==s.MozTransition||void 0!==s.MsTransition||void 0!==s.OTransition),e.fn.timeTo=function(){var t,i,s,c,u,h,p,f,y,m={},g=e.now();for(t=0;t<arguments.length;t+=1)i=arguments[t],0===t&&"string"==typeof i?c=i:"object"==typeof i?"function"==typeof i.getTime?m.timeTo=i:m=e.extend(m,i):"function"==typeof i?m.callback=i:(s=parseInt(i,10),isNaN(s)||(m.seconds=s));if(m.timeTo)m.timeTo.getTime?u=m.timeTo.getTime():"number"==typeof m.timeTo&&(u=m.timeTo),m.seconds=u>g?Math.floor((u-g)/1e3):0;else if(m.time)if((u=m.time)||(u=new Date),"object"==typeof u&&u.getTime)m.seconds=u.getHours()*n+60*u.getMinutes()+u.getSeconds(),m.countdown=!1;else if("string"==typeof u){for(p=u.split(":"),f=0,y=1;p.length;)f+=p.pop()*y,y*=60;m.seconds=f,m.countdown=!1}return!1!==m.countdown&&m.seconds>a&&void 0===m.displayDays?(h=Math.floor(m.seconds/a),m.displayDays=(h<10?2:h<100&&2)||3):!0===m.displayDays?m.displayDays=3:m.displayDays&&(m.displayDays=m.displayDays>0?Math.floor(m.displayDays):3),this.each(function(){var t,i,s,a,n,u,h,p,f,y,g,v,b,T,w,I,S,x,k,C,M,D=e(this),z=D.data();if(z.intervalId&&(clearInterval(z.intervalId),z.intervalId=null),z.vals)"reset"!==c&&e.extend(z,m);else{if(i=z.opt?z.options:m,t=Object.keys(o).reduce(function(t,i){return Array.isArray(o[i])?t[i]=o[i].slice(0):t[i]=o[i],t},{}),(z=e.extend(t,i)).options=i,z.height=Math.round(100*z.fontSize/93)||z.height,z.width=Math.round(.8*z.fontSize+.13*z.height)||z.width,z.displayHours=!(!z.displayDays&&!z.displayHours),a={fontFamily:z.fontFamily},z.fontSize>0&&(a.fontSize=z.fontSize+"px"),n=z.languages[z.lang]||d[z.lang],D.addClass("timeTo").addClass("timeTo-"+z.theme).css(a),u='<ul style="left:'+Math.round(z.height/10)+"px; top:-"+z.height+'px"><li>0</li><li>0</li></ul></div>',p='<div class="first"'+(h=z.fontSize?' style="width:'+z.width+"px; height:"+z.height+'px;"':' style=""')+">"+u,f="<div"+h+">"+u,y="<span>:</span>",g=Math.round(2*z.width+3),b=(v=z.captionSize||z.fontSize&&Math.round(.43*z.fontSize))?"font-size:"+v+"px;":"",T=v?' style="'+b+'"':"",w=(z.displayCaptions?(z.displayHours?'<figure style="max-width:'+g+'px">$1<figcaption'+T+">"+n.hours+"</figcaption></figure>"+y:"")+'<figure style="max-width:'+g+'px">$1<figcaption'+T+">"+n.min+"</figcaption></figure>"+y+'<figure style="max-width:'+g+'px">$1<figcaption'+T+">"+n.sec+"</figcaption></figure>":(z.displayHours?"$1"+y:"")+"$1"+y+"$1").replace(/\$1/g,p+f),z.displayDays>0){for(I=.4*z.fontSize||o.gap,S=p,y=z.displayCaptions?"":'<span style="margin-right:0'+Math.round(I)+'px">'+n.abbr_day+"</span>",s=z.displayDays-1;s>0;s-=1)S+=1===s?f.replace('">','margin-right:0px">'):f;w=(z.displayCaptions?'<figure style="width:'+Math.round(z.width*z.displayDays+I+4)+'px">$1<figcaption style="'+b+"padding-right:"+Math.round(I)+'px">'+n.days+"</figcaption></figure>":"$1").replace(/\$1/,S)+y+w}D.html(w)}if((x=D.find("div")).length<z.vals.length){for(k=z.vals.length-x.length,C=z.vals,M=z.limits,z.vals=[],z.limits=[],s=0;s<x.length;s+=1)z.vals[s]=C[k+s],z.limits[s]=M[k+s];z.iSec=z.vals.length-1,z.iHour=z.vals.length-5}z.sec=z.seconds,D.data(z),c&&l[c]?l[c].call(D,z.seconds):z.start?l.start.call(D,z.seconds):r.call(D,z.seconds)})},e});