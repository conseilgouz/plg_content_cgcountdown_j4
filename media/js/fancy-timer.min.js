/**
 * Fancy Timer
 * Show countdown timer or realtime clock
 *
 * --------------  ConseilGouz  ----------------------
 *        add max value if direction > 0 
 *        add lang option
 * ---------------------------------------------------
 *
 * @author Oleksii Teterin <altmoc@gmail.com>
 * @version 1.0.2
 * @license ISC http://opensource.org/licenses/ISC
 * @date 2020-07-05
 * @host https://github.com/Lexxus/fancy-timer
 */
!function(t){if("object"==typeof module&&"object"==typeof module.exports){var e=t(require,exports);void 0!==e&&(module.exports=e)}else if("function"==typeof define&&define.amd)define(["require","exports"],t);else{var i={};t(null,i),window.FancyTimer=i.FancyTimer}}((function(t,e){"use strict";Object.defineProperty(e,"__esModule",{value:!0}),e.FancyTimer=void 0;var i={en:{days:"days",hours:"hours",min:"minutes",sec:"seconds"},ru:{days:"дней",hours:"часов",min:"минут",sec:"секунд"},ua:{days:"днiв",hours:"годин",min:"хвилин",sec:"секунд"},de:{days:"Tag",hours:"Uhr",min:"Minuten",sec:"Secunden"},fr:{days:"jours",hours:"heures",min:"minutes",sec:"secondes"},es:{days:"días",hours:"horas",min:"minutos",sec:"segundos"},sp:{days:"días",hours:"horas",min:"minutos",sec:"segundos"},it:{days:"giorni",hours:"ore",min:"minuti",sec:"secondi"},nl:{days:"dagen",hours:"uren",min:"minuten",sec:"seconden"},no:{days:"dager",hours:"timer",min:"minutter",sec:"sekunder"},pt:{days:"dias",hours:"horas",min:"minutos",sec:"segundos"},tr:{days:"gün",hours:"saat",min:"dakika",sec:"saniye"},pl:{days:"dni",hours:"godziny",min:"minuty",sec:"secundy"}},s=3600,n="ft-reverse",a=function(){function t(t,e){var s=this;this.timestamp=0,this.value=0,this.direction=0;var n=e.captions,a=e.showDays,r=void 0===a?0:a,d=e.lang;d&&e.showDays>0&&(n||(n={}),n.seconds=i[d].sec,n.minutes=i[d].min,n.hours=i[d].hours,n.days=i[d].days),this.container=t,this.tick=this.tick.bind(this),this.handleTransitionEnd=this.handleTransitionEnd.bind(this),this.updateOptions(e);var h=o(null==n?void 0:n.seconds),c=o(null==n?void 0:n.minutes),u=o(null==n?void 0:n.hours),l=r>0&&r<=6?o(null==n?void 0:n.days,r):void 0;if(this.element={seconds:h,minutes:c,hours:u,days:l},t.innerHTML="",l){t.appendChild(l);var f=document.createElement("span");f.className="ft-space",t.appendChild(f)}t.appendChild(u);var v=document.createElement("span");v.className="ft-delimiter",t.appendChild(v),t.appendChild(c),t.appendChild(v.cloneNode()),t.appendChild(h),t.querySelectorAll(".ft-shifter").forEach((function(t){var e=t.offsetHeight;t.parentElement.style.height=e/2+"px",t.addEventListener("transitionend",s.handleTransitionEnd)})),this.update(this.value,!0),this.direction&&this.start(this.direction)}return t.prototype.destroy=function(){var t=this;this.container.querySelectorAll(".ft-shifter").forEach((function(e){e.removeEventListener("transitionend",t.handleTransitionEnd)}))},t.prototype.start=function(t){var e=t&&Math.abs(t)<2?t:this.direction;if(e){this.intervalId&&this.stop(),this.timestamp=Date.now();var i=window.setInterval;this.direction=e,this.intervalId=i(this.tick,1e3)}},t.prototype.stop=function(){window.clearInterval(this.intervalId),this.intervalId=0,this.value=this.getActualValue()},t.prototype.update=function(t,e){void 0===e&&(e=!1);var i=Math.floor(t/86400),n=t%86400,a=Math.floor(n/s);n%=s;var r=Math.floor(n/60),o=n%60,h=this.element;h.days&&d(h.days,i,e,this.reverse),d(h.hours,a,e,this.reverse),d(h.minutes,r,e,this.reverse),d(h.seconds,o,e,this.reverse)},t.prototype.updateOptions=function(t){var e=t.value,i=t.direction,s=t.warn,a=t.reverseAnimation,r=t.onFinish,o=t.onWarning,d=t.max;t.lang;this.direction=i&&Math.abs(i)<2?i:this.direction,this.reverse=a,this.warn=s,this.onFinish=r,this.onWarning=o,this.max=d,this.setValue(e),this.reverse?this.container.classList.add(n):this.container.classList.remove(n)},t.prototype.setValue=function(t){switch(this.timestamp=Date.now(),typeof t){case"number":this.value=t;break;case"object":t instanceof Date&&(this.value=r(t),this.value<0?(this.value=Math.abs(this.value),this.direction=1):this.direction=-1);break;case"string":if(/^[012]?\d:[0-5]?\d:[0-5]?\d$/.test(t)){var e=(new Date).toISOString().split("T")[0],i=new Date(e+"T"+t);this.value=r(i)}}},t.prototype.getActualValue=function(){var t=Math.round((Date.now()-this.timestamp)/1e3);return this.value+t*this.direction},t.prototype.tick=function(){if(this.direction){var t=this.getActualValue();if(1==this.direction&&this.max>0&&t>this.max||t<0?(this.stop(),"function"==typeof this.onFinish&&this.onFinish()):this.update(t),this.warn){var e=this.direction<0&&t>=0&&this.warn.secondsLeft>=t,i=this.warn.className||"ft-warn",s=this.container.classList,n=s.contains(i);e&&!n?(s.add(i),"function"==typeof this.onWarning&&this.onWarning()):!e&&n&&s.remove(i)}}else this.stop()},t.prototype.handleTransitionEnd=function(t){var e=t.target,i=this.reverse?1:0,s=this.reverse?0:1;e.children[s].textContent=e.children[i].textContent,e.classList.remove("ft-transit")},t}();function r(t){var e=t.getTime()||0;return Math.round((e-Date.now())/1e3)}function o(t,e){void 0===e&&(e=2);var i=document.createElement("figure");return i.className="ft-digits",i.innerHTML=function(t){for(var e="",i=0;i<t;i++)e+='<div class="ft-digit"><ul class="ft-shifter"><li>0</li><li>0</li></ul></div>';return e}(e)+(t?'<figcaption class="ft-caption">'+t+"</figcaption>":""),i}function d(t,e,i,s){void 0===s&&(s=!1);var n=t.querySelectorAll(".ft-digit"),a=s?1:0,r=s?0:1,o=e.toString();o.length<n.length&&(o="0000".substr(0,n.length-o.length)+o),n.forEach((function(t,e){var s=t.firstElementChild,n=s.children,d=n[r].textContent,h=o[e];d!==h&&(i?n[r].textContent=h:(n[a].textContent=h,s.classList.add("ft-transit")))}))}e.FancyTimer=a,e.default=a}));